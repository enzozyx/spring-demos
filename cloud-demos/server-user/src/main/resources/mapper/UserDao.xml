<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.enzo.demo.springcloud.server.user.dao.UserDao">


  <select id="selectUserByName" parameterType="java.lang.String" resultType="com.enzo.demo.entity.sys.User">
    select p.row_id as id, p.mail as email, p.mobile_phone as mobilePhone, a.identifier as username, a.credential as password from t_user_profile p
    left join t_user_authorize a on a.user_id  = p.row_id
    WHERE a.identifier = #{username} or p.mail = #{username} or p.mobile_phone = #{username};
  </select>
</mapper>